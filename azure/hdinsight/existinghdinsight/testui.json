{
  "$schema": "https://schema.management.azure.com/schemas/0.1.2-preview/CreateUIDefinition.MultiVm.json#",
  "handler": "Microsoft.Compute.MultiVm",
  "version": "0.1.2-preview",
  "parameters": {
    "basics": [
      {
        "name": "clusterName",
        "type": "Microsoft.Common.TextBox",
        "label": "Cluster name",
        "toolTip": "The name of the Existing HDInsight cluster.",
        "constraints": {
          "required": true,
          "regex": "^[a-z0-9]{3,24}$"
        }
      },
      {
        "name": "clusterLoginUserName",
        "type": "Microsoft.Common.TextBox",
        "label": "Cluster Login Username",
        "toolTip": "These credentials can be used to submit jobs to the cluster and to log into cluster dashboards.",
        "constraints": {
          "required": true
        }
      },
      {
        "name": "clusterLoginPassword",
        "type": "Microsoft.Compute.CredentialsCombo",
        "label": {
          "authenticationType": "Authentication type",
          "password": "Password",
          "confirmPassword": "Confirm password",
          "sshPublicKey": "SSH public key"
        },
        "toolTip": {
          "authenticationType": "Authentication type to login to the cluster vm",
          "password": "ssh to a vm using a password",
          "sshPublicKey": "ssh to a vm using a public key (pem file usually)"
        },
        "constraints": {
          "required": true
        },
        "options": {
          "hideConfirmation": false
        },
        "osPlatform": "Linux"
      }
    ],
    "steps": [ 
      {
        "name": "SampleClusterConfig",
        "label": "Cluster Settings",
        "subLabel": {
          "preValidation": "Configure the EdgeNode",
          "postValidation": "Done"
        },
        "bladeTitle": "EdgeNode Size",
        "elements": [
        {
            "name": "edgenodeVmSize",
            "type": "Microsoft.Compute.SizeSelector",
            "label": "Infoworks Edge Node",
            "toolTip": "The size of virtual machine to provision for infoworks node.",
            "recommendedSizes": [
              "Standard_D13_v2"
              ],
            "constraints": {
              "allowedSizes": [
                "Standard_D12_v2",
                "Standard_D13_v2",
                "Standard_D14_v2"
                ]
            },
            "osPlatform": "Linux",
            "count": 1
        }
      ]
    }
  ],
    "outputs": {
      "clusterName": "[basics('clusterName')]",
      "clusterLoginUserName": "[basics('clusterLoginUserName')]",
      "clusterLoginPassword": "[basics('clusterLoginPassword')]",
      "edgenodeVmSize": "[steps('SampleClusterConfig').edgenodeVmSize]"
      }
  }
}
